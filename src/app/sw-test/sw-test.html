<div class="pwa-container">
  <header class="app-header">
    <h1>{{ title() }}</h1>
    <div class="status-indicators">
      <span class="status-indicator" [class.online]="isOnline()" [class.offline]="!isOnline()">
        {{ isOnline() ? '🟢 Online' : '🔴 Offline' }}
      </span>
      @if (serviceWorkerEnabled()) {
        <span class="status-indicator sw-enabled">⚙️ SW Active</span>
      }
      @if (isInstalled()) {
        <span class="status-indicator installed">📱 Installed</span>
      }
    </div>
  </header>

  <!-- Device Detection Section -->
  <section class="device-info">
    <h2>{{ getDeviceIcon() }} Device Information</h2>
    <div class="info-grid">
      <div class="info-card">
        <h3>Device Type</h3>
        <p class="device-type">{{ deviceType() }}</p>
        @if (isMobile()) {
          <span class="device-badge mobile">📱 Mobile Device</span>
        } @else {
          <span class="device-badge desktop">💻 Desktop/PC</span>
        }
      </div>
      
      <div class="info-card">
        <h3>Browser</h3>
        <p>{{ browserName() }}</p>
      </div>
      
      <div class="info-card">
        <h3>PWA Support</h3>
        @if (canInstallPWA()) {
          <p class="pwa-support supported">✅ Supported</p>
        } @else {
          <p class="pwa-support not-supported">❌ Limited Support</p>
        }
      </div>
    </div>
  </section>

  <!-- PWA Installation Section -->
  <section class="installation-section">
    <h2>📱 PWA Installation</h2>
    
    @if (isInstalled()) {
      <div class="install-card installed">
        <h3>✅ App Already Installed!</h3>
        <p>You're running the PWA in standalone mode.</p>
        @if (isMobile()) {
          <p>Check your home screen - the app icon should be there! 🎉</p>
        } @else {
          <p>The app is installed and running in standalone mode! 🎉</p>
        }
      </div>
    } @else {
      <!-- Android Installation -->
      @if (isAndroid()) {
        <div class="install-card android">
          <h3>🤖 Android Installation</h3>
          <p>{{ getMobileInstallInstructions() }}</p>
          @if (installPromptEvent()) {
            <button class="install-btn android-btn" (click)="installApp()">
              📱 Install Android App
            </button>
          } @else {
            <p class="install-note">Look for the install prompt in your browser or check the menu (⋮) for "Add to Home screen"</p>
          }
        </div>
      }
      
      <!-- iOS Installation -->
      @if (isIOS()) {
        <div class="install-card ios">
          <h3>🍎 iOS Installation</h3>
          <p>{{ getMobileInstallInstructions() }}</p>
          <button class="install-btn ios-btn" (click)="showIOSInstallInstructions()">
            📱 Show iOS Install Steps
          </button>
        </div>
      }
      
      <!-- Desktop Installation -->
      @if (!isMobile()) {
        <div class="install-card desktop">
          <h3>💻 Desktop Installation</h3>
          @if (installPromptEvent()) {
            <p>Install this PWA on your desktop for the best experience!</p>
            <button class="install-btn desktop-btn" (click)="installApp()">
              🖥️ Install Desktop App
            </button>
          } @else {
            <p>Look for the install icon in your browser's address bar or menu</p>
            <p class="install-note">
              Chrome/Edge: Look for ⊕ icon in address bar<br>
              Firefox: Check Application menu
            </p>
          }
        </div>
      }
    }
  </section>

  <!-- PWA Features Section -->
  <section class="features-section">
    <h2>⚡ PWA Features</h2>
    
    <div class="feature-grid">
      <div class="feature-card">
        <h3>🔄 Offline Capability</h3>
        <p>Works without internet connection</p>
        <button class="feature-btn" (click)="testOfflineCapability()">
          Test Offline Mode
        </button>
      </div>
      
      @if (updateAvailable()) {
        <div class="feature-card update-available">
          <h3>🔄 Update Available</h3>
          <p>A new version is ready!</p>
          <button class="feature-btn update-btn" (click)="updateApp()">
            Update App
          </button>
        </div>
      }
      
      <div class="feature-card">
        <h3>⚙️ Service Worker</h3>
        @if (serviceWorkerEnabled()) {
          <p class="sw-status enabled">✅ Active & Caching</p>
        } @else {
          <p class="sw-status disabled">❌ Not Available</p>
        }
      </div>
      
      <div class="feature-card">
        <h3>🌐 Network Status</h3>
        <p class="network-status" [class.online]="isOnline()" [class.offline]="!isOnline()">
          {{ isOnline() ? '🟢 Connected' : '🔴 Offline Mode' }}
        </p>
      </div>
    </div>
  </section>

  <!-- Navigation -->
  <section class="navigation-section">
    <a routerLink="/" class="nav-button">
      🏠 Back to Home
    </a>
  </section>
</div>
