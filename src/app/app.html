<div class="pwa-demo-container">
  <header class="header">
    <h1>ğŸ„ {{ title() }}</h1>
    <div class="device-info">
      <div class="device-badge">
        {{ getDeviceIcon() }} {{ deviceType() }}
      </div>
      <div class="browser-badge">
        ğŸŒ {{ browserName() }}
      </div>
    </div>
    <div class="status-indicators">
      <div class="status-badge" [class.online]="isOnline()" [class.offline]="!isOnline()">
        {{ isOnline() ? 'ğŸŸ¢ Online' : 'ğŸ”´ Offline' }}
      </div>
      <div class="status-badge" [class.enabled]="serviceWorkerEnabled()">
        {{ serviceWorkerEnabled() ? 'âš™ï¸ SW Enabled' : 'âŒ SW Disabled' }}
      </div>
      @if (isMobile()) {
        <div class="status-badge mobile-indicator">
          ğŸ“± Mobile PWA Ready
        </div>
      }
    </div>
  </header>

  <main class="main-content">
    <section class="pwa-section">
      <h2>PWA Installation</h2>
      <div class="installation-card">
        @if (isInstalled()) {
          <div class="success-message">
            âœ… App is installed! You're running it as a PWA.
            <div class="install-details">
              ğŸ‰ Perfect! You're using {{ deviceType() }} in PWA mode
            </div>
          </div>
        } @else if (installPromptEvent() && canInstallPWA()) {
          <div class="install-prompt">
            <p>ğŸ“± Install this app for the best experience!</p>
            <button class="install-btn" (click)="installApp()">
              Install App
            </button>
            @if (isMobile()) {
              <div class="mobile-install-tip">
                ğŸ’¡ {{ getMobileInstallInstructions() }}
              </div>
            }
          </div>
        } @else if (isIOS()) {
          <div class="ios-install-prompt">
            <p>ğŸ iOS Installation Available!</p>
            <button class="install-btn" (click)="showIOSInstallInstructions()">
              Show iOS Install Instructions
            </button>
            <div class="ios-install-tip">
              ğŸ“± Use Safari: Share â†’ Add to Home Screen
            </div>
          </div>
        } @else if (isMobile() && !canInstallPWA()) {
          <div class="info-message">
            ï¿½ For best PWA experience on {{ deviceType() }}, use Chrome (Android) or Safari (iOS)
          </div>
        } @else {
          <div class="info-message">
            ï¿½ğŸ’¡ To see the install prompt, open this app in a supported browser (Chrome, Edge, Safari).
            @if (!isMobile()) {
              <br><strong>Desktop:</strong> Chrome and Edge support PWA installation
            }
          </div>
        }
      </div>
    </section>

    <section class="pwa-section">
      <h2>Service Worker Status</h2>
      <div class="sw-status-card">
        @if (serviceWorkerEnabled()) {
          <div class="success-message">
            âœ… Service Worker is active and caching resources
          </div>
          @if (updateAvailable()) {
            <div class="update-prompt">
              <p>ğŸ”„ A new version is available!</p>
              <button class="update-btn" (click)="updateApp()">
                Update Now
              </button>
            </div>
          }
        } @else {
          <div class="warning-message">
            âš ï¸ Service Worker is not available in this environment
          </div>
        }
      </div>
    </section>

    <section class="pwa-section">
      <h2>Device & PWA Information</h2>
      <div class="device-info-card">
        <div class="info-grid">
          <div class="info-item">
            <strong>Device Type:</strong> {{ getDeviceIcon() }} {{ deviceType() }}
          </div>
          <div class="info-item">
            <strong>Browser:</strong> ğŸŒ {{ browserName() }}
          </div>
          <div class="info-item">
            <strong>PWA Support:</strong> {{ canInstallPWA() ? 'âœ… Supported' : 'âš ï¸ Limited' }}
          </div>
          <div class="info-item">
            <strong>Mobile Device:</strong> {{ isMobile() ? 'ğŸ“± Yes' : 'ğŸ’» No' }}
          </div>
          @if (isAndroid()) {
            <div class="info-item android-specific">
              <strong>Android PWA:</strong> ğŸ¤– Full support in Chrome
            </div>
          }
          @if (isIOS()) {
            <div class="info-item ios-specific">
              <strong>iOS PWA:</strong> ğŸ Use Safari for installation
            </div>
          }
        </div>
      </div>
    </section>

    <section class="pwa-section">
      <h2>Offline Capabilities</h2>
      <div class="offline-demo-card">
        <p>Try these steps to test offline functionality:</p>
        @if (isMobile()) {
          <ol>
            <li>Load this page completely (wait for all content)</li>
            <li><strong>Turn OFF WiFi and Mobile Data</strong> on your device</li>
            <li>Refresh this page - it should still work perfectly!</li>
            <li>Navigate around the app - everything is cached</li>
            <li>Click the button below to confirm offline capability</li>
          </ol>
        } @else {
          <ol>
            <li>Load this page completely</li>
            <li>Open Developer Tools (F12) â†’ Network tab</li>
            <li>Check "Offline" checkbox or disable network</li>
            <li>Refresh the page - it should still work!</li>
            <li>Click the button below to test offline features</li>
          </ol>
        }
        <button class="test-btn" (click)="testOfflineCapability()">
          {{ isMobile() ? 'ğŸ“± Test Mobile Offline' : 'ğŸ’» Test Desktop Offline' }}
        </button>
      </div>
    </section>

    <section class="pwa-section">
      <h2>PWA Features Demonstrated</h2>
      <div class="features-grid">
        <div class="feature-card">
          <h3>ğŸ“¦ App Installation</h3>
          <p>Users can install the app to their home screen</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ”„ Service Worker</h3>
          <p>Background sync and caching for offline functionality</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ“± Responsive Design</h3>
          <p>Works great on mobile and desktop</p>
        </div>
        <div class="feature-card">
          <h3>âš¡ Fast Loading</h3>
          <p>Cached resources load instantly</p>
        </div>
      </div>
    </section>
  </main>
</div>

<router-outlet></router-outlet>
