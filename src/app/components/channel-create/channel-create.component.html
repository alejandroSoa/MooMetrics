<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button (click)="goBack()" text="Establos"></ion-back-button>
    </ion-buttons>
    <ion-title class="custom-title">Crear Nuevo Canal</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="channel-create-container">
    
    <!-- Error Message -->
    <div *ngIf="errorMessage" class="error-container">
      <div class="error-message">
        {{ errorMessage }}
      </div>
    </div>

    <!-- Success Message -->
    <div *ngIf="successMessage" class="success-container">
      <div class="success-message">
        {{ successMessage }}
      </div>
    </div>

    <!-- Channel Form -->
    <div class="channel-form-container">
      <ion-card class="channel-card">
        <ion-card-header>
          <ion-card-title class="channel-title">
            Información del Nuevo Canal
          </ion-card-title>
        </ion-card-header>
        
        <ion-card-content>
          <!-- Stable Info -->
          <div class="stable-info-section">
            <p class="stable-info-text">
              <strong>Establo:</strong> {{ stableName || 'Cargando...' }} (ID: {{ stableId }})
            </p>
          </div>

          <form class="channel-form">
            
            <!-- Channel Name -->
            <ion-item class="form-item">
              <ion-label position="stacked">Nombre del Canal</ion-label>
              <ion-input 
                [(ngModel)]="channelData.name" 
                name="name" 
                placeholder="Ingrese el nombre del canal"
                [clearInput]="true"
                required>
              </ion-input>
            </ion-item>

            <!-- Channel Description -->
            <ion-item class="form-item">
              <ion-label position="stacked">Descripción (Opcional)</ion-label>
              <ion-textarea 
                [(ngModel)]="channelData.description"
                name="description"
                placeholder="Ingrese una descripción para el canal"
                rows="3">
              </ion-textarea>
            </ion-item>

            <!-- Form Actions -->
            <div class="form-actions">
              <ion-button 
                expand="block" 
                color="dark" 
                (click)="createChannel()"
                [disabled]="!channelData.name.trim() || isLoading"
                class="save-button">
                <ion-spinner *ngIf="isLoading" name="dots"></ion-spinner>
                <span *ngIf="!isLoading">Crear Canal</span>
                <span *ngIf="isLoading">Creando...</span>
              </ion-button>

              <ion-button 
                expand="block" 
                fill="outline" 
                (click)="resetForm()"
                [disabled]="isLoading"
                class="cancel-button">
                Limpiar Formulario
              </ion-button>

              <ion-button 
                expand="block" 
                fill="clear" 
                (click)="goBack()"
                [disabled]="isLoading"
                class="back-button">
                Volver a la Lista
              </ion-button>
            </div>

          </form>
        </ion-card-content>
      </ion-card>
    </div>
  </div>
</ion-content>