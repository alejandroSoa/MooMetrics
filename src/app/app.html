<div class="pwa-demo-container">
  <header class="header">
    <h1>🐄 {{ title() }}</h1>
    <div class="status-indicators">
      <div class="status-badge" [class.online]="isOnline()" [class.offline]="!isOnline()">
        {{ isOnline() ? '🟢 Online' : '🔴 Offline' }}
      </div>
      <div class="status-badge" [class.enabled]="serviceWorkerEnabled()">
        {{ serviceWorkerEnabled() ? '⚙️ SW Enabled' : '❌ SW Disabled' }}
      </div>
    </div>
  </header>

  <main class="main-content">
    <section class="pwa-section">
      <h2>PWA Installation</h2>
      <div class="installation-card">
        @if (isInstalled()) {
          <div class="success-message">
            ✅ App is installed! You're running it as a PWA.
          </div>
        } @else if (installPromptEvent()) {
          <div class="install-prompt">
            <p>📱 Install this app for the best experience!</p>
            <button class="install-btn" (click)="installApp()">
              Install App
            </button>
          </div>
        } @else {
          <div class="info-message">
            💡 To see the install prompt, open this app in a supported browser (Chrome, Edge, Safari).
          </div>
        }
      </div>
    </section>

    <section class="pwa-section">
      <h2>Service Worker Status</h2>
      <div class="sw-status-card">
        @if (serviceWorkerEnabled()) {
          <div class="success-message">
            ✅ Service Worker is active and caching resources
          </div>
          @if (updateAvailable()) {
            <div class="update-prompt">
              <p>🔄 A new version is available!</p>
              <button class="update-btn" (click)="updateApp()">
                Update Now
              </button>
            </div>
          }
        } @else {
          <div class="warning-message">
            ⚠️ Service Worker is not available in this environment
          </div>
        }
      </div>
    </section>

    <section class="pwa-section">
      <h2>Offline Capabilities</h2>
      <div class="offline-demo-card">
        <p>Try these steps to test offline functionality:</p>
        <ol>
          <li>Load this page completely</li>
          <li>Disconnect from the internet or go to Developer Tools → Network → Offline</li>
          <li>Refresh the page - it should still work!</li>
          <li>Click the button below to test offline features</li>
        </ol>
        <button class="test-btn" (click)="testOfflineCapability()">
          Test Offline Capability
        </button>
      </div>
    </section>

    <section class="pwa-section">
      <h2>PWA Features Demonstrated</h2>
      <div class="features-grid">
        <div class="feature-card">
          <h3>📦 App Installation</h3>
          <p>Users can install the app to their home screen</p>
        </div>
        <div class="feature-card">
          <h3>🔄 Service Worker</h3>
          <p>Background sync and caching for offline functionality</p>
        </div>
        <div class="feature-card">
          <h3>📱 Responsive Design</h3>
          <p>Works great on mobile and desktop</p>
        </div>
        <div class="feature-card">
          <h3>⚡ Fast Loading</h3>
          <p>Cached resources load instantly</p>
        </div>
      </div>
    </section>
  </main>
</div>

<router-outlet></router-outlet>
